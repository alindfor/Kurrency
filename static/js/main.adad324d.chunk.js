(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{19:function(e,t,a){e.exports=a(44)},25:function(e,t,a){},26:function(e,t,a){},44:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(17),s=a.n(c),o=(a(25),a(2)),i=a(3),l=a(5),u=a(4),m=a(6),d=(a(26),a(7)),f=a(18),h=a.n(f).a.create({baseURL:"https://api.exchangeratesapi.io/",timeout:5e3,headers:{"Content-Type":"application/jsom"}}),p=function(){return new Promise(function(e,t){h.get("latest").then(function(t){var a=t.data.rates;e(a)}).catch(function(e){console.log(JSON.stringify(e)),t("Failed to get exchanges rates.")})})},y={truncateValue:function(e,t){var a=parseFloat(e).toFixed(t);return a=parseFloat(a)}},C=function(){function e(t,a){Object(o.a)(this,e),this.name=t,this.rate=a}return Object(i.a)(e,[{key:"exchange",value:function(e,t){return e/this.rate*t.rate}}]),e}(),g=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.isLoading;return r.a.createElement("header",{className:e?"header-container hidden":"header-container"},r.a.createElement("h1",{className:"header-logo"},"Kurrency"),r.a.createElement("nav",{className:"nav-container"},r.a.createElement("ul",{className:"nav-list"},r.a.createElement("li",{className:"nav-item"},"Home"),r.a.createElement("li",{className:"nav-item"},"About"))))}}]),t}(n.Component),v=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={baseCurrency:a.props.baseCurrency},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.isLoading,a=e.toCurrency,n=e.fromCurrency;return r.a.createElement("section",{className:t?"content-container hidden":"content-container"},r.a.createElement("div",{className:"inner-container"},r.a.createElement("div",{className:"input-container"},r.a.createElement("input",{className:"currency-input",spellCheck:"false",placeholder:"0",name:"from-value",onChange:this.props.handleValueChange,value:this.props.fromValue}),r.a.createElement("button",{className:"currency-button",name:"from-currency",onClick:this.props.changeCurrency},r.a.createElement("span",{className:"currency-button-text"},n?n.name:"USD"),r.a.createElement("span",{className:"currency-button-icon-container"},r.a.createElement(d.a,{className:"currency-button-icon"})))),r.a.createElement("div",{className:"change-currency-container"},r.a.createElement("span",{className:"change-icon-container",onClick:this.props.swapCurrencies},r.a.createElement(d.b,{className:"change-icon"}))),r.a.createElement("div",{className:"input-container"},r.a.createElement("input",{className:"currency-input",spellCheck:"false",placeholder:"0",name:"to-value",onChange:this.props.handleValueChange,value:this.props.toValue}),r.a.createElement("button",{className:"currency-button",name:"to-currency",onClick:this.props.changeCurrency},r.a.createElement("span",{className:"currency-button-text"},a?a.name:"USD"),r.a.createElement("span",{className:"currency-button-icon-container"},r.a.createElement(d.a,{className:"currency-button-icon"})))),r.a.createElement("div",{className:"result-info-container"},r.a.createElement("p",{className:"result-info"},"1 ",n?n.name:"USD"," is ",n?y.truncateValue(n.exchange(1,a),8):"0"," ",a?a.name:"SEK")),r.a.createElement("div",{className:"reset-container"},r.a.createElement("button",{className:"reset-button",onClick:this.props.resetFields},r.a.createElement("span",{className:"reset-text"},"Reset"),r.a.createElement("span",{className:"reset-icon-container"},r.a.createElement(d.d,{className:"reset-icon"}))))))}}]),t}(n.Component),b=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.isLoading;return r.a.createElement("div",{className:e?"loader-container":"loader-container hidden"},r.a.createElement("span",{className:"loader"}),r.a.createElement("h1",{className:"loader-title"},"loading exchange rates..."))}}]),t}(n.Component),E=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.isLoading;return r.a.createElement("footer",{className:e?"footer hidden":"footer"},r.a.createElement("div",{className:"inner-footer"},r.a.createElement("p",null,"Made with ReactJS by ",r.a.createElement("a",{href:"https://github.com/alindfor/",target:"_blank",rel:"noreferrer noopener"},"Alexander Lindfors"),", 2019"),r.a.createElement("p",null,"The currency exchange rates are fetched using ",r.a.createElement("a",{href:"https://exchangeratesapi.io/",target:"_blank",rel:"noreferrer noopener"},"Exchange Rates API"))))}}]),t}(n.Component),N=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e)))._handleKeyDown=function(e){if(a.props.isShowing)switch(e.keyCode){case 27:a.closeModal()}},a.filterCurrencies=function(){var e=a.state,t=e.unfilteredCurrencies,n=e.filter;if(0===n.length)a.setState({filteredCurrencies:t});else{var r=t.filter(function(e){var t=e.name,a=n.toUpperCase();return t.includes(a)});a.setState({filteredCurrencies:r})}},a.updateText=function(e){a.setState({filter:e.target.value},function(){a.filterCurrencies()})},a.closeModal=function(e){a.setState({filter:""});var t=a.state.filteredCurrencies,n=void 0;"undefined"!==typeof e&&(n=t[e]),a.props.onClose(n),a.currenciesList.scrollTo({top:0,left:0})},a.state={filter:"",unfilteredCurrencies:a.props.currencies,filteredCurrencies:a.props.currencies},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this._handleKeyDown)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this._handleKeyDown)}},{key:"componentWillReceiveProps",value:function(e,t){t.currencies!==e.currencies&&this.setState({unfilteredCurrencies:e.currencies,filteredCurrencies:e.currencies})}},{key:"render",value:function(){var e=this,t=this.props.isShowing,a=this.state,n=a.filter,c=a.filteredCurrencies;return r.a.createElement("div",{className:t?"modal-container":"modal-container hidden"},r.a.createElement("div",{className:"modal"},r.a.createElement("div",{className:"close-modal-container"},r.a.createElement(d.c,{className:"close-modal-icon",onClick:function(){return e.closeModal()}})),r.a.createElement("input",{autoFocus:!0,className:"currency-search",autoCorrect:"false",type:"text",placeholder:"Filter currencies..",value:n,onChange:this.updateText}),r.a.createElement("div",{className:"currencies-container",ref:function(t){return e.currenciesList=t}},r.a.createElement("ul",{className:"currencies-list"},c.map(function(t,a){return r.a.createElement("li",{key:a,className:"currency-item",onClick:function(){return e.closeModal(a)}},r.a.createElement("p",null,t.name))})))))}}]),t}(n.Component),O=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).resetFields=function(){var e=a.state.currencies;a.setState({fromCurrency:e[0],toCurrency:e[1],fromValue:"",toValue:""})},a.handleValueChange=function(e){var t=a.state,n=t.toCurrency,r=t.fromCurrency,c=e.target,s=c.name,o=c.value,i=e.nativeEvent.data;if(" "!==i&&(i>=0||i<=9||","===i||"."===i)){var l=o.replace(",",".");switch(s){case"from-value":a.setState({fromValue:l,toValue:y.truncateValue(r.exchange(l,n),3)});break;case"to-value":a.setState({toValue:l,fromValue:y.truncateValue(n.exchange(l,r),3)});break;default:console.log("Default, unused case. There was no matching field name.")}}},a.setLoading=function(e){a.setState({isLoading:e})},a.buildExchangeRates=function(e){var t=Object.entries(e),n=[];t.forEach(function(e){var t=new C(e[0],e[1]);n.push(t)}),n.push(a.state.baseCurrency),a.setState({currencies:n,fromCurrency:n[0],toCurrency:n[1]})},a.openModal=function(e,t){var n=-1;switch(e.target.name){case"from-currency":n=0;break;case"to-currency":n=1;break;default:console.log("Default, unused case")}a.setState({modalIsOpen:!0,waitingForNewCurrency:n})},a.swapCurrencies=function(){var e=a.state,t=e.toCurrency,n=e.toValue,r=e.fromCurrency,c=e.fromValue;a.setState({toCurrency:r,fromCurrency:t,toValue:c,fromValue:n})},a.closeModal=function(e){var t=a.state,n=t.waitingForNewCurrency,r=t.toValue,c=t.fromValue,s=t.toCurrency,o=t.fromCurrency;if(-1!==n){if("undefined"!==typeof e)switch(n){case 0:a.setState({fromCurrency:e,fromValue:y.truncateValue(s.exchange(r,e))});break;case 1:a.setState({toCurrency:e,toValue:y.truncateValue(o.exchange(c,e),3)});break;default:console.log("Default, unused case. There is no correlating currency field.")}a.setState({modalIsOpen:!1,waitingForNewCurrency:-1})}else console.log("Unknown receiver of selected currency")},a.state={isLoading:!0,modalIsOpen:!1,currencies:[],waitingForNewCurrency:-1,toCurrency:void 0,toValue:"0",fromCurrency:void 0,fromValue:"0",baseCurrency:new C("EUR",1)},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;p().then(function(t){e.buildExchangeRates(t),e.setLoading(!1)}).catch(function(t){console.log("The fetching of rates failed"),console.log("response: ",t),e.setLoading(!1)})}},{key:"render",value:function(){var e=this.state,t=e.isLoading,a=e.modalIsOpen,n=e.currencies,c=e.fromCurrency,s=e.fromValue,o=e.toCurrency,i=e.toValue;return r.a.createElement("div",{className:"container"},r.a.createElement(g,{isLoading:t}),r.a.createElement(v,{isLoading:t,fromCurrency:c,fromValue:s,toCurrency:o,toValue:i,handleValueChange:this.handleValueChange,baseCurrency:this.state.baseCurrency,changeCurrency:this.openModal,swapCurrencies:this.swapCurrencies,resetFields:this.resetFields}),r.a.createElement(N,{onClose:this.closeModal,isShowing:a,currencies:n}),r.a.createElement(b,{isLoading:t}),r.a.createElement(E,{isLoading:t}))}}]),t}(n.Component);s.a.render(r.a.createElement(O,null),document.getElementById("root"))}},[[19,1,2]]]);
//# sourceMappingURL=main.adad324d.chunk.js.map