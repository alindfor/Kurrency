(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{19:function(e,t,n){e.exports=n(44)},25:function(e,t,n){},26:function(e,t,n){},44:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(17),o=n.n(c),s=(n(25),n(2)),i=n(3),l=n(5),u=n(4),m=n(6),d=(n(26),n(7)),f=n(18),h=n.n(f).a.create({baseURL:"https://api.exchangeratesapi.io/",timeout:5e3,headers:{"Content-Type":"application/jsom"}}),p=function(){return new Promise(function(e,t){h.get("latest").then(function(t){var n=t.data.rates;e(n)}).catch(function(e){console.log(JSON.stringify(e)),t("Failed to get exchanges rates.")})})},y={truncateValue:function(e,t){var n=parseFloat(e).toFixed(t);return n=parseFloat(n).toString(),isFinite(n)||(n="Invalid number"),n}},C=function(){function e(t,n){Object(s.a)(this,e),this.name=t,this.rate=n}return Object(i.a)(e,[{key:"exchange",value:function(e,t){return e/this.rate*t.rate}}]),e}(),g=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.isLoading;return r.a.createElement("header",{className:e?"header-container hidden":"header-container"},r.a.createElement("h1",{className:"header-logo"},"Kurrency"))}}]),t}(a.Component),v=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={baseCurrency:n.props.baseCurrency},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.isLoading,n=e.toCurrency,a=e.fromCurrency;return r.a.createElement("section",{className:t?"content-container hidden":"content-container"},r.a.createElement("div",{className:"inner-container"},r.a.createElement("div",{className:"input-container"},r.a.createElement("input",{className:"currency-input",spellCheck:"false",placeholder:"0",name:"from-value",onChange:this.props.handleValueChange,value:this.props.fromValue}),r.a.createElement("button",{className:"currency-button",name:"from-currency",onClick:this.props.changeCurrency},r.a.createElement("span",{className:"currency-button-text"},a?a.name:"USD"),r.a.createElement("span",{className:"currency-button-icon-container"},r.a.createElement(d.a,{className:"currency-button-icon"})))),r.a.createElement("div",{className:"change-currency-container"},r.a.createElement("span",{className:"change-icon-container",onClick:this.props.swapCurrencies},r.a.createElement(d.b,{className:"change-icon"}))),r.a.createElement("div",{className:"input-container"},r.a.createElement("input",{className:"currency-input",spellCheck:"false",placeholder:"0",name:"to-value",onChange:this.props.handleValueChange,value:this.props.toValue}),r.a.createElement("button",{className:"currency-button",name:"to-currency",onClick:this.props.changeCurrency},r.a.createElement("span",{className:"currency-button-text"},n?n.name:"USD"),r.a.createElement("span",{className:"currency-button-icon-container"},r.a.createElement(d.a,{className:"currency-button-icon"})))),r.a.createElement("div",{className:"result-info-container"},r.a.createElement("p",{className:"result-info"},"1 ",a?a.name:"USD"," is ",a?y.truncateValue(a.exchange(1,n),8):"0"," ",n?n.name:"SEK")),r.a.createElement("div",{className:"reset-container"},r.a.createElement("button",{className:"reset-button",onClick:this.props.resetFields},r.a.createElement("span",{className:"reset-text"},"Reset"),r.a.createElement("span",{className:"reset-icon-container"},r.a.createElement(d.d,{className:"reset-icon"}))))))}}]),t}(a.Component),b=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.isLoading;return r.a.createElement("div",{className:e?"loader-container":"loader-container hidden"},r.a.createElement("span",{className:"loader-logo-container"},r.a.createElement("h1",{className:"header-logo"},"Kurrency"),r.a.createElement("p",{className:"loader-slogan"},"Your online currency converter")),r.a.createElement("div",{className:"loader-and-title-container"},r.a.createElement("div",{className:"loader"}),r.a.createElement("h1",{className:"loader-title"},"loading exchange rates...")))}}]),t}(a.Component),E=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.isLoading;return r.a.createElement("footer",{className:e?"footer hidden":"footer"},r.a.createElement("div",{className:"inner-footer"},r.a.createElement("p",null,"Made with ReactJS by ",r.a.createElement("a",{href:"https://github.com/alindfor/",target:"_blank",rel:"noreferrer noopener"},"Alexander Lindfors"),", 2019"),r.a.createElement("p",null,"The currency exchange rates are fetched using ",r.a.createElement("a",{href:"https://exchangeratesapi.io/",target:"_blank",rel:"noreferrer noopener"},"Exchange Rates API"))))}}]),t}(a.Component),N=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e)))._handleKeyDown=function(e){if(n.props.isShowing)switch(e.keyCode){case 27:n.closeModal()}},n.filterCurrencies=function(){var e=n.state,t=e.unfilteredCurrencies,a=e.filter;if(0===a.length)n.setState({filteredCurrencies:t});else{var r=t.filter(function(e){var t=e.name,n=a.toUpperCase();return t.includes(n)});n.setState({filteredCurrencies:r})}},n.updateText=function(e){n.setState({filter:e.target.value},function(){n.filterCurrencies()})},n.closeModal=function(e){n.setState({filter:""});var t=n.state.filteredCurrencies,a=void 0;"undefined"!==typeof e&&(a=t[e]),n.props.onClose(a),n.currenciesList.scrollTo({top:0,left:0})},n.state={filter:"",unfilteredCurrencies:n.props.currencies,filteredCurrencies:n.props.currencies},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this._handleKeyDown)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this._handleKeyDown)}},{key:"componentWillReceiveProps",value:function(e,t){t.currencies!==e.currencies&&this.setState({unfilteredCurrencies:e.currencies,filteredCurrencies:e.currencies})}},{key:"render",value:function(){var e=this,t=this.props.isShowing,n=this.state,a=n.filter,c=n.filteredCurrencies;return r.a.createElement("div",{className:t?"modal-container":"modal-container hidden"},r.a.createElement("div",{className:"modal"},r.a.createElement("div",{className:"close-modal-container"},r.a.createElement(d.c,{className:"close-modal-icon",onClick:function(){return e.closeModal()}})),r.a.createElement("input",{autoFocus:!0,className:"currency-search",autoCorrect:"false",type:"text",placeholder:"Filter currencies..",value:a,onChange:this.updateText}),r.a.createElement("div",{className:"currencies-container",ref:function(t){return e.currenciesList=t}},r.a.createElement("ul",{className:"currencies-list"},c.map(function(t,n){return r.a.createElement("li",{key:n,className:"currency-item",onClick:function(){return e.closeModal(n)}},r.a.createElement("p",null,t.name))})))))}}]),t}(a.Component),O=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).resetFields=function(){var e=n.state.currencies;n.setState({fromCurrency:e[0],toCurrency:e[1],fromValue:"",toValue:""})},n.handleValueChange=function(e){var t=n.state,a=t.toCurrency,r=t.fromCurrency,c=e.target,o=c.name,s=c.value,i=e.nativeEvent.data;if(" "!==i&&(i>=0||i<=9||","===i||"."===i)){var l=s.replace(",",".");switch(o){case"from-value":n.setState({fromValue:l,toValue:y.truncateValue(r.exchange(l,a),3)});break;case"to-value":n.setState({toValue:l,fromValue:y.truncateValue(a.exchange(l,r),3)});break;default:console.log("Default, unused case. There was no matching field name.")}}},n.setLoading=function(e){n.setState({isLoading:e})},n.buildExchangeRates=function(e){var t=Object.entries(e),a=[];t.forEach(function(e){var t=new C(e[0],e[1]);a.push(t)}),a.push(n.state.baseCurrency),n.setState({currencies:a,fromCurrency:a[0],toCurrency:a[1]})},n.openModal=function(e,t){var a=-1;switch(e.target.name){case"from-currency":a=0;break;case"to-currency":a=1;break;default:console.log("Default, unused case")}n.setState({modalIsOpen:!0,waitingForNewCurrency:a})},n.swapCurrencies=function(){var e=n.state,t=e.toCurrency,a=e.toValue,r=e.fromCurrency,c=e.fromValue;n.setState({toCurrency:r,fromCurrency:t,toValue:c,fromValue:a})},n.closeModal=function(e){var t=n.state,a=t.waitingForNewCurrency,r=t.toValue,c=t.fromValue,o=t.toCurrency,s=t.fromCurrency;if(-1!==a){if("undefined"!==typeof e)switch(a){case 0:n.setState({fromCurrency:e,fromValue:y.truncateValue(o.exchange(r,e))});break;case 1:n.setState({toCurrency:e,toValue:y.truncateValue(s.exchange(c,e),3)});break;default:console.log("Default, unused case. There is no correlating currency field.")}n.setState({modalIsOpen:!1,waitingForNewCurrency:-1})}else console.log("Unknown receiver of selected currency")},n.state={isLoading:!0,modalIsOpen:!1,currencies:[],waitingForNewCurrency:-1,toCurrency:void 0,toValue:"0",fromCurrency:void 0,fromValue:"0",baseCurrency:new C("EUR",1)},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;p().then(function(t){e.buildExchangeRates(t),e.setLoading(!1)}).catch(function(t){console.log("The fetching of rates failed"),console.log("response: ",t),e.setLoading(!1)})}},{key:"render",value:function(){var e=this.state,t=e.isLoading,n=e.modalIsOpen,a=e.currencies,c=e.fromCurrency,o=e.fromValue,s=e.toCurrency,i=e.toValue;return r.a.createElement("div",{className:"container"},r.a.createElement(g,{isLoading:t}),r.a.createElement(v,{isLoading:t,fromCurrency:c,fromValue:o,toCurrency:s,toValue:i,handleValueChange:this.handleValueChange,baseCurrency:this.state.baseCurrency,changeCurrency:this.openModal,swapCurrencies:this.swapCurrencies,resetFields:this.resetFields}),r.a.createElement(N,{onClose:this.closeModal,isShowing:n,currencies:a}),r.a.createElement(b,{isLoading:t}),r.a.createElement(E,{isLoading:t}))}}]),t}(a.Component);o.a.render(r.a.createElement(O,null),document.getElementById("root"))}},[[19,1,2]]]);
//# sourceMappingURL=main.47092e13.chunk.js.map