(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{19:function(e,n,r){e.exports=r(45)},25:function(e,n,r){},26:function(e,n,r){},45:function(e,n,r){"use strict";r.r(n);var a=r(0),t=r.n(a),c=r(17),o=r.n(c),i=(r(25),r(2)),u=r(3),s=r(6),l=r(5),m=r(7),d=(r(26),r(27),r(4)),y=r(18),h=r.n(y).a.create({baseURL:"https://api.exchangeratesapi.io/",timeout:5e3,headers:{"Content-Type":"application/jsom"}}),f=function(){return new Promise(function(e,n){h.get("latest").then(function(n){var r=n.data.rates;e(r)}).catch(function(e){console.log(JSON.stringify(e)),n("Failed to get exchanges rates.")})})},p={truncateValue:function(e,n){var r=parseFloat(e).toFixed(n);return r=parseFloat(r).toString(),isFinite(r)||(r="Invalid number"),r}},g={BGN:{country:"Bulgaria",currency:"Bulgarian lev"},NZD:{country:"New Zealand",currency:"New Zealand dollar"},ILS:{country:"Israel",currency:"Israeli shekel"},RUB:{country:"Russia",currency:"Russian ruble"},CAD:{country:"Canada",currency:"Canadian dollar"},USD:{country:"United States of America",currency:"United States Dollar"},PHP:{country:"Philippines",currency:"Philippines Peso"},CHF:{country:"Switzerland",currency:"Swiss franc"},ZAR:{country:"South Africa",currency:"South African Rand"},AUD:{country:"Australia",currency:"Australian dollar"},JPY:{country:"Japan",currency:"Japanese Yen"},TRY:{country:"Turkey",currency:"Turkish lira"},HKD:{country:"Hong Kong",currency:"Hong Kong dollar"},MYR:{country:"Malaysia",currency:"Malaysian ringit"},THB:{country:"Thailand",currency:"Thai baht"},HRK:{country:"Croatia",currency:"Croatian kuna"},NOK:{country:"Norway",currency:"Norweigan krone"},IDR:{country:"Indonesia",currency:"Indonesian rupiah"},DKK:{country:"Denmark",currency:"Danish krone"},CZK:{country:"Czech Republic",currency:"Czech koruna"},HUF:{country:"Hungary",currency:"Hungarian forint"},GBP:{country:"Great Britain",currency:"British Pound"},MXN:{country:"Mexico",currency:"Mexican Peso"},KRW:{country:"South Korea",currency:"South Korean won"},ISK:{country:"Iceland",currency:"Icelandic Krona"},SGD:{country:"Singapore",currency:"Singapore dollar"},BRL:{country:"Brazil",currency:"Brazil real"},PLN:{country:"Poland",currency:"Polish z\u0142oty"},INR:{country:"India",currency:"Indian rupee"},RON:{country:"Romania",currency:"Romanian leu"},CNY:{country:"China",currency:"Chinese yuan"},SEK:{country:"Sweden",currency:"Swedish krona"},EUR:{country:"Europe",currency:"Euro"}},C=function(){function e(n,r,a,t){Object(i.a)(this,e),this.symbol=n,this.name=r,this.rate=a,this.country=t}return Object(u.a)(e,[{key:"exchange",value:function(e,n){return e/this.rate*n.rate}},{key:"contains",value:function(e){return!!this.symbol.includes(e.toUpperCase())||(!!this.country.toLowerCase().includes(e.toLowerCase())||!!this.name.toLowerCase().includes(e.toLowerCase()))}}]),e}();function E(e){var n=e.isLoading;return t.a.createElement("header",{className:n?"header-container hidden":"header-container"},t.a.createElement("h1",{className:"header-logo"},"Kurrency"))}function v(e){var n=e.isLoading,r=e.toCurrency,a=e.fromCurrency;return t.a.createElement("section",{className:n?"content-container hidden":"content-container"},t.a.createElement("div",{className:"inner-container"},t.a.createElement("div",{className:"input-container"},t.a.createElement("input",{className:"currency-input",spellCheck:"false",placeholder:"0",name:"from-value",onChange:e.handleValueChange,value:e.fromValue}),t.a.createElement("button",{className:"currency-button",name:"from-currency",onClick:e.changeCurrency},t.a.createElement("span",{className:"currency-button-text"},a?a.symbol:"USD"),t.a.createElement("span",{className:"currency-button-icon-container"},t.a.createElement(d.a,{className:"currency-button-icon"})))),t.a.createElement("div",{className:"change-currency-container"},t.a.createElement("span",{className:"change-icon-container",onClick:e.swapCurrencies},t.a.createElement(d.b,{className:"change-icon"}))),t.a.createElement("div",{className:"input-container"},t.a.createElement("input",{className:"currency-input",spellCheck:"false",placeholder:"0",name:"to-value",onChange:e.handleValueChange,value:e.toValue}),t.a.createElement("button",{className:"currency-button",name:"to-currency",onClick:e.changeCurrency},t.a.createElement("span",{className:"currency-button-text"},r?r.symbol:"USD"),t.a.createElement("span",{className:"currency-button-icon-container"},t.a.createElement(d.a,{className:"currency-button-icon"})))),t.a.createElement("div",{className:"result-info-container"},t.a.createElement("p",{className:"result-info"},"1 ",a?a.symbol:"USD"," is ",a?p.truncateValue(a.exchange(1,r),8):"0"," ",r?r.symbol:"SEK")),t.a.createElement("div",{className:"reset-container"},t.a.createElement("button",{className:"reset-button",onClick:e.resetFields},t.a.createElement("span",{className:"reset-text"},"Reset"),t.a.createElement("span",{className:"reset-icon-container"},t.a.createElement(d.e,{className:"reset-icon"}))))))}var b=function(e){function n(){return Object(i.a)(this,n),Object(s.a)(this,Object(l.a)(n).apply(this,arguments))}return Object(m.a)(n,e),Object(u.a)(n,[{key:"render",value:function(){var e=this.props.isLoading;return t.a.createElement("div",{className:e?"loader-container":"loader-container hidden"},t.a.createElement("span",{className:"loader-logo-container"},t.a.createElement("h1",{className:"header-logo"},"Kurrency"),t.a.createElement("p",{className:"loader-slogan"},"Your online currency converter")),t.a.createElement("div",{className:"loader-and-title-container"},t.a.createElement("div",{className:"loader"}),t.a.createElement("h1",{className:"loader-title"},"loading exchange rates...")))}}]),n}(a.Component),N=function(e){function n(){return Object(i.a)(this,n),Object(s.a)(this,Object(l.a)(n).apply(this,arguments))}return Object(m.a)(n,e),Object(u.a)(n,[{key:"render",value:function(){var e=this.props.isLoading;return t.a.createElement("footer",{className:e?"footer hidden":"footer"},t.a.createElement("div",{className:"inner-footer"},t.a.createElement("p",null," View the source code on ",t.a.createElement("a",{href:"https://www.github.com/alindfor/Kurrency/",target:"_blank",rel:"noopener noreferrer"},"GitHub")),t.a.createElement("p",null,"Made with ReactJS by ",t.a.createElement("a",{href:"https://github.com/alindfor/",target:"_blank",rel:"noreferrer noopener"},"Alexander Lindfors"),", 2019"),t.a.createElement("p",null,"The currency exchange rates are fetched using ",t.a.createElement("a",{href:"https://exchangeratesapi.io/",target:"_blank",rel:"noreferrer noopener"},"Exchange Rates API"))))}}]),n}(a.Component),w=function(e){function n(e){var r;return Object(i.a)(this,n),(r=Object(s.a)(this,Object(l.a)(n).call(this,e)))._handleKeyDown=function(e){if(r.props.isShowing)switch(e.keyCode){case 27:r.closeModal()}},r.filterCurrencies=function(){var e=r.state,n=e.unfilteredCurrencies,a=e.filter;if(0===a.length)r.setState({filteredCurrencies:n});else{var t=n.filter(function(e){return e.contains(a)});r.setState({filteredCurrencies:t})}},r.updateText=function(e){r.props.isShowing&&r.setState({filter:e.target.value},function(){r.filterCurrencies()})},r.closeModal=function(e){r.setState({filter:""});var n=r.state.filteredCurrencies,a=void 0;"undefined"!==typeof e&&(a=n[e]),r.props.onClose(a),r.currenciesList.scrollTo({top:0,left:0})},r.state={filter:"",unfilteredCurrencies:r.props.currencies,filteredCurrencies:r.props.currencies},r}return Object(m.a)(n,e),Object(u.a)(n,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this._handleKeyDown)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this._handleKeyDown)}},{key:"componentWillReceiveProps",value:function(e,n){n.currencies!==e.currencies&&this.setState({unfilteredCurrencies:e.currencies,filteredCurrencies:e.currencies})}},{key:"render",value:function(){var e=this,n=this.props.isShowing,r=this.state,a=r.filter,c=r.filteredCurrencies;return n&&this.currencySearchField.focus(),t.a.createElement("div",{className:n?"modal-container":"modal-container hidden"},t.a.createElement("div",{className:"modal"},t.a.createElement("div",{className:"close-modal-container"},t.a.createElement(d.c,{className:"close-modal-icon",onClick:function(){return e.closeModal()}})),t.a.createElement("div",{className:"currency-search-container"},t.a.createElement(d.d,{className:"currency-search-icon"}),t.a.createElement("input",{ref:function(n){return e.currencySearchField=n},className:"currency-search",autoCorrect:"false",type:"text",placeholder:"Enter a currency or a country..",value:a,onChange:this.updateText})),t.a.createElement("div",{className:"currencies-container",ref:function(n){return e.currenciesList=n}},t.a.createElement("ul",{className:"currencies-list"},c.map(function(n,r){return t.a.createElement("li",{key:r,className:"currency-item",onClick:function(){return e.closeModal(r)}},t.a.createElement("div",{className:"currency-flag currency-flag-xl currency-flag-".concat(n.symbol.toLowerCase())}),t.a.createElement("div",null,t.a.createElement("p",{className:"currency-list-symbol"},n.symbol),t.a.createElement("p",{className:"currency-list-name"},n.name)))})))))}}]),n}(a.Component),S=function(e){function n(e){var r;return Object(i.a)(this,n),(r=Object(s.a)(this,Object(l.a)(n).call(this,e))).resetFields=function(){var e=r.state.currencies;r.setState({fromCurrency:e[0],toCurrency:e[1],fromValue:"",toValue:""})},r.handleValueChange=function(e){var n=r.state,a=n.toCurrency,t=n.fromCurrency,c=e.target,o=c.name,i=c.value,u=e.nativeEvent.data;if(" "!==u&&(u>=0||u<=9||","===u||"."===u)){var s=i.replace(",",".");switch(o){case"from-value":r.setState({fromValue:s,toValue:p.truncateValue(t.exchange(s,a),3)});break;case"to-value":r.setState({toValue:s,fromValue:p.truncateValue(a.exchange(s,t),3)});break;default:console.log("Default, unused case. There was no matching field name.")}}},r.setLoading=function(e){r.setState({isLoading:e})},r.buildExchangeRates=function(e){var n=Object.entries(e),a=[];n.forEach(function(e){var n=e[0],r=e[1],t=g[n],c=t.country,o=t.currency,i=new C(n,o,r,c);a.push(i)});var t=new C("EUR","Euro",1,"Europe");a.push(t),r.setState({currencies:a,fromCurrency:a[0],toCurrency:a[1]})},r.openModal=function(e,n){var a=-1;switch(e.target.name){case"from-currency":a=0;break;case"to-currency":a=1;break;default:console.log("Default, unused case")}r.setState({modalIsOpen:!0,waitingForNewCurrency:a})},r.swapCurrencies=function(){var e=r.state,n=e.toCurrency,a=e.toValue,t=e.fromCurrency,c=e.fromValue;r.setState({toCurrency:t,fromCurrency:n,toValue:c,fromValue:a})},r.closeModal=function(e){var n=r.state,a=n.waitingForNewCurrency,t=n.toValue,c=n.fromValue,o=n.toCurrency,i=n.fromCurrency;if(-1!==a){if("undefined"!==typeof e)switch(a){case 0:r.setState({fromCurrency:e,fromValue:p.truncateValue(o.exchange(t,e))});break;case 1:r.setState({toCurrency:e,toValue:p.truncateValue(i.exchange(c,e),3)});break;default:console.log("Default, unused case. There is no correlating currency field.")}r.setState({modalIsOpen:!1,waitingForNewCurrency:-1})}else console.log("Unknown receiver of selected currency")},r.state={isLoading:!0,modalIsOpen:!1,currencies:[],waitingForNewCurrency:-1,toCurrency:void 0,toValue:"0",fromCurrency:void 0,fromValue:"0"},r}return Object(m.a)(n,e),Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this;f().then(function(n){e.buildExchangeRates(n),e.setLoading(!1)}).catch(function(n){console.log("The fetching of rates failed"),console.log("response: ",n),e.setLoading(!1)})}},{key:"render",value:function(){var e=this.state,n=e.isLoading,r=e.modalIsOpen,a=e.currencies,c=e.fromCurrency,o=e.fromValue,i=e.toCurrency,u=e.toValue;return t.a.createElement("div",{className:"container"},t.a.createElement(E,{isLoading:n}),t.a.createElement(v,{isLoading:n,fromCurrency:c,fromValue:o,toCurrency:i,toValue:u,handleValueChange:this.handleValueChange,changeCurrency:this.openModal,swapCurrencies:this.swapCurrencies,resetFields:this.resetFields}),t.a.createElement(w,{onClose:this.closeModal,isShowing:r,currencies:a}),t.a.createElement(b,{isLoading:n}),t.a.createElement(N,{isLoading:n}))}}]),n}(a.Component);o.a.render(t.a.createElement(S,null),document.getElementById("root"))}},[[19,1,2]]]);
//# sourceMappingURL=main.da81b6a5.chunk.js.map